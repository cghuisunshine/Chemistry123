<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chapter 17 ‚Äì Additional Aspects of Aqueous Equilibria: Concept Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #050816;
      --bg-elevated: #0b1020;
      --bg-node: #111827;
      --border-subtle: #1f2937;
      --accent: #22d3ee;
      --accent-soft: rgba(34, 211, 238, 0.15);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --text-soft: #6b7280;
      --danger: #f97373;
      --radius-lg: 12px;
      --radius-md: 8px;
      --radius-sm: 4px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.45);
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.25s ease-out;
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --font-mono: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    .page {
      display: flex;
      min-height: 100vh;
      padding: 1rem;
      gap: 1rem;
    }

    .sidebar {
      flex: 0 0 280px;
      background: linear-gradient(145deg, #020617, #020617 30%, #020617 100%);
      border-radius: var(--radius-lg);
      padding: 1rem 1rem 1.25rem;
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: var(--shadow-soft);
      position: sticky;
      top: 0.75rem;
      align-self: flex-start;
      max-height: calc(100vh - 1.5rem);
      overflow: auto;
    }

    .sidebar-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .sidebar-title {
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .sidebar-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      white-space: nowrap;
    }

    .sidebar-section {
      margin-bottom: 0.9rem;
    }

    .search-label {
      display: block;
      font-size: 0.75rem;
      color: var(--text-soft);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 0.25rem;
    }

    .search-box {
      width: 100%;
      padding: 0.45rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 0.85rem;
      outline: none;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
    }

    .search-box::placeholder {
      color: #6b7280;
    }

    .search-box:focus {
      border-color: var(--accent);
      background: #020617;
      box-shadow: 0 0 0 1px rgba(34, 211, 238, 0.6);
    }

    .search-hint {
      font-size: 0.7rem;
      color: var(--text-soft);
      margin-top: 0.25rem;
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0.2rem 0 0;
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      padding-top: 0.5rem;
    }

    .nav-item {
      margin-bottom: 0.25rem;
    }

    .nav-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.3rem 0.6rem;
      border-radius: 999px;
      color: var(--text-muted);
      font-size: 0.85rem;
      text-decoration: none;
      border: 1px solid transparent;
      cursor: pointer;
      transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
    }

    .nav-link span {
      display: inline-flex;
      align-items: baseline;
      gap: 0.25rem;
    }

    .nav-link strong {
      font-weight: 600;
      color: #e5e7eb;
    }

    .nav-link small {
      text-transform: uppercase;
      letter-spacing: 0.11em;
      font-size: 0.68rem;
      color: var(--text-soft);
    }

    .nav-link:hover {
      background: rgba(15, 118, 110, 0.3);
      border-color: rgba(45, 212, 191, 0.6);
      color: #f9fafb;
      transform: translateX(2px);
    }

    .nav-link.active-link {
      background: var(--accent-soft);
      border-color: rgba(34, 211, 238, 0.9);
      color: #f9fafb;
    }

    .nav-tag {
      font-size: 0.65rem;
      padding: 0.05rem 0.4rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-soft);
    }

    .sidebar-footer {
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      margin-top: 0.7rem;
      padding-top: 0.4rem;
      font-size: 0.75rem;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .sidebar-footer strong {
      color: var(--text-muted);
    }

    .sidebar-footer code {
      font-family: var(--font-mono);
      background: rgba(15, 23, 42, 0.9);
      padding: 0.08rem 0.35rem;
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      font-size: 0.7rem;
    }

    .content {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 960px;
      margin: 0 auto;
    }

    .content-header {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(30, 64, 175, 0.9));
      border-radius: var(--radius-lg);
      padding: 1rem 1.25rem;
      border: 1px solid rgba(129, 140, 248, 0.7);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .content-header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(94, 234, 212, 0.15), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .header-main {
      position: relative;
      z-index: 1;
    }

    .header-title {
      font-size: 1.5rem;
      font-weight: 650;
      letter-spacing: 0.04em;
    }

    .header-subtitle {
      font-size: 0.9rem;
      color: #cbd5f5;
      margin-top: 0.1rem;
    }

    .header-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.6rem;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
    }

    .header-tag {
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(191, 219, 254, 0.7);
      background: rgba(15, 23, 42, 0.8);
      color: #e0f2fe;
    }

    .header-highlight {
      margin-top: 0.6rem;
      font-size: 0.8rem;
      color: #e5e7eb;
      max-width: 46rem;
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding-bottom: 1rem;
    }

    .section-card {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.06), transparent 60%), var(--bg-elevated);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(31, 41, 55, 0.95);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      padding: 0.9rem 1rem 0.95rem;
      position: relative;
      overflow: hidden;
      transition: border-color var(--transition-med), transform var(--transition-med), box-shadow var(--transition-med), background var(--transition-med);
    }

    .section-card:hover {
      border-color: rgba(34, 211, 238, 0.7);
      transform: translateY(-2px);
      box-shadow: 0 22px 50px rgba(0, 0, 0, 0.9);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.12), transparent 65%), #020617;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      align-items: baseline;
      margin-bottom: 0.35rem;
    }

    .section-title-group {
      display: flex;
      flex-direction: column;
      gap: 0.05rem;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
    }

    .section-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-soft);
    }

    .section-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
    }

    .section-badge {
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.9);
    }

    .section-summary {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 0.4rem;
    }

    .nodes {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }

    .node {
      border-radius: var(--radius-md);
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(31, 41, 55, 0.9);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transition: border-color var(--transition-fast), transform var(--transition-fast), background var(--transition-fast);
    }

    .node:hover {
      border-color: rgba(34, 211, 238, 0.7);
      transform: translateY(-1px);
    }

    .node-header {
      border: none;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.4));
      color: #f9fafb;
      padding: 0.4rem 0.55rem;
      font-size: 0.78rem;
      text-align: left;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      position: relative;
    }

    .node-header span {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    .node-type {
      font-weight: 600;
    }

    .node-tagline {
      font-size: 0.7rem;
      color: rgba(209, 213, 219, 0.9);
    }

    .node-header::after {
      content: "‚ñæ";
      font-size: 0.75rem;
      color: rgba(209, 213, 219, 0.9);
      transform-origin: center;
      transition: transform var(--transition-fast);
    }

    .node.collapsed .node-header::after {
      transform: rotate(-90deg);
    }

    .node-content {
      padding: 0.45rem 0.55rem 0.5rem;
      font-size: 0.8rem;
      color: var(--text-main);
      background: rgba(15, 23, 42, 0.98);
      line-height: 1.5;
    }

    .node.collapsed .node-content {
      display: none;
    }

    .node-section-title {
      font-weight: 600;
      font-size: 0.82rem;
      margin-bottom: 0.15rem;
      color: var(--accent);
    }

    .node-list {
      margin: 0.1rem 0 0.25rem;
      padding-left: 1.1rem;
    }

    .node-list li {
      margin-bottom: 0.12rem;
    }

    .inline-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
      font-size: 0.72rem;
      padding: 0.04rem 0.4rem;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: var(--text-soft);
      background: rgba(2, 6, 23, 0.8);
    }

    .formula-row {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      margin: 0.18rem 0;
      padding: 0.2rem 0.25rem;
      border-radius: var(--radius-sm);
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .formula-label {
      font-size: 0.72rem;
      color: var(--text-soft);
      margin-right: 0.1rem;
      white-space: nowrap;
    }

    .formula-text {
      font-family: var(--font-mono);
      font-size: 0.76rem;
      color: #e5e7eb;
      white-space: nowrap;
      overflow-x: auto;
    }

    .copy-button {
      border: none;
      background: rgba(15, 23, 42, 0.9);
      color: #f9fafb;
      cursor: pointer;
      font-size: 0.8rem;
      border-radius: 999px;
      padding: 0.12rem 0.35rem;
      line-height: 1;
      margin-left: auto;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(75, 85, 99, 0.9);
      transition: background var(--transition-fast), transform var(--transition-fast), border-color var(--transition-fast);
    }

    .copy-button:hover {
      background: rgba(34, 211, 238, 0.2);
      border-color: rgba(34, 211, 238, 0.9);
      transform: translateY(-1px);
    }

    .example-block {
      margin-top: 0.2rem;
      padding: 0.35rem 0.4rem;
      border-radius: var(--radius-sm);
      background: rgba(15, 23, 42, 0.97);
      border: 1px dashed rgba(55, 65, 81, 0.9);
    }

    .example-title {
      font-size: 0.78rem;
      font-weight: 600;
      color: #fbbf24;
      margin-bottom: 0.12rem;
    }

    .example-body {
      margin: 0;
      font-size: 0.78rem;
      color: var(--text-main);
    }

    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.2rem;
      margin-top: 0.3rem;
      font-size: 0.7rem;
    }

    .chip {
      padding: 0.08rem 0.4rem;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.9);
    }

    .toast {
      position: fixed;
      bottom: 0.85rem;
      left: 50%;
      transform: translateX(-50%) translateY(120%);
      padding: 0.3rem 0.7rem;
      font-size: 0.75rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      color: #f9fafb;
      border: 1px solid rgba(34, 211, 238, 0.9);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.8);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-med), transform var(--transition-med);
      z-index: 80;
    }

    .toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    @media (max-width: 960px) {
      .page {
        flex-direction: column;
        padding: 0.6rem;
      }
      .sidebar {
        position: static;
        max-height: none;
        width: 100%;
        order: 0;
      }
      .content {
        order: 1;
      }
      .nodes {
        grid-template-columns: 1fr;
      }
      .section-card {
        padding: 0.85rem 0.8rem 0.9rem;
      }
      .content-header {
        padding: 0.9rem 0.8rem;
      }
    }

    @media (max-width: 640px) {
      .sidebar-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .header-title {
        font-size: 1.25rem;
      }
      .section-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .nodes {
        gap: 0.45rem;
      }
      .formula-text {
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-title">Chapter 17 Map</div>
        <div class="sidebar-subtitle">Aqueous equilibria</div>
      </div>

      <div class="sidebar-section">
        <label for="search-box" class="search-label">Search / filter</label>
        <input id="search-box" class="search-box" type="search" placeholder="common ion, Ksp, buffer, Qsp..." />
        <div class="search-hint">Filters cards live by keyword in titles and text.</div>
      </div>

      <div class="sidebar-section">
        <div class="search-label">Sections</div>
        <ul class="nav-list">
          <li class="nav-item">
            <a href="#sec-17-1" class="nav-link">
              <span><strong>17.1</strong><small>common-ion effect</small></span>
              <span class="nav-tag">roots/trunk/leaves</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#sec-17-2" class="nav-link">
              <span><strong>17.2</strong><small>buffers</small></span>
              <span class="nav-tag">pH control</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#sec-17-3" class="nav-link">
              <span><strong>17.3</strong><small>titrations</small></span>
              <span class="nav-tag">curves</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#sec-17-4" class="nav-link">
              <span><strong>17.4</strong><small>solubility equilibria</small></span>
              <span class="nav-tag">Ksp</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#sec-17-5" class="nav-link">
              <span><strong>17.5</strong><small>factors &amp; complex ions</small></span>
              <span class="nav-tag">pH, Kf</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#sec-17-6" class="nav-link">
              <span><strong>17.6</strong><small>precipitation &amp; separation</small></span>
              <span class="nav-tag">Qsp vs Ksp</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="sidebar-footer">
        <div><strong>Copy tips</strong></div>
        <div>‚Ä¢ Click <code>üìã</code> to copy formulas.</div>
        <div>‚Ä¢ Double-click any text to copy it.</div>
        <div>Use search + section links for quick review.</div>
      </div>
    </aside>

    <main class="content">
      <header class="content-header">
        <div class="header-main">
          <div class="header-title">Additional Aspects of Aqueous Equilibria</div>
          <div class="header-subtitle">
            Concept map for Chapter 17: common-ion effect, buffers, titrations, solubility, and precipitation/separation.
          </div>
          <div class="header-tags">
            <span class="header-tag">roots: core ideas &amp; definitions</span>
            <span class="header-tag">trunk: formulas &amp; patterns</span>
            <span class="header-tag">leaves: examples &amp; tips</span>
          </div>
          <p class="header-highlight">
            Treat this as a mini-textbook: expand Roots to review definitions, Trunk to see formulas with copy buttons, and
            Leaves to walk through compact examples and strategies that mirror the written tutorial.
          </p>
        </div>
      </header>

      <section class="cards" aria-label="Chapter 17 sections">

        <!-- 17.1 Common-Ion Effect -->
        <article class="section-card" id="sec-17-1" data-section-keywords="common ion effect weak acid base le chatelier buffer">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.1 The Common-Ion Effect</div>
              <div class="section-label">How shared ions suppress ionization</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">weak electrolytes</div>
              <div class="section-badge">Le Ch√¢telier</div>
            </div>
          </header>
          <p class="section-summary">
            When a weak acid or base shares an ion with a strong electrolyte in solution, its ionization is suppressed. This
            common-ion effect underlies buffer behavior and many solubility phenomena.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Core ideas &amp; definitions</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    A <strong>common ion</strong> is an ion present in more than one solute in the same solution (for example,
                    CH‚ÇÉCOO‚Åª from both CH‚ÇÉCOOH and CH‚ÇÉCOONa).
                  </li>
                  <li>
                    A <strong>weak electrolyte</strong> (like CH‚ÇÉCOOH or NH‚ÇÉ) ionizes only partially; a <strong>strong
                    electrolyte</strong> (like HCl or NaCl) dissociates completely.
                  </li>
                  <li>
                    When a weak acid or weak base and a strong electrolyte share a common ion, the weak species
                    <strong>ionizes less</strong> than it would alone: this is the <strong>common-ion effect</strong>.
                  </li>
                  <li>
                    The effect is an application of <strong>Le Ch√¢telier‚Äôs principle</strong>: adding a product ion shifts
                    equilibrium toward reactants, lowering [H‚Å∫] or [OH‚Åª] produced by the weak species.
                  </li>
                  <li>
                    The <strong>equilibrium constant (Ka or Kb) does not change</strong> when a common ion is added; only the
                    equilibrium concentrations change to maintain the constant‚Äôs value.
                  </li>
                </ul>
                <div class="chips-row">
                  <span class="chip">weak acid + its salt</span>
                  <span class="chip">weak base + its salt</span>
                  <span class="chip">suppressed ionization</span>
                </div>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">Formulas &amp; patterns</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; meaning</div>

                <div class="formula-row">
                  <span class="formula-label">Weak acid:</span>
                  <span class="formula-text">HA(aq) ‚áå H‚Å∫(aq) + A‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy weak acid equilibrium">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Ka:</span>
                  <span class="formula-text">Ka = [H‚Å∫][A‚Åª] / [HA]</span>
                  <button class="copy-button" type="button" aria-label="Copy Ka expression">üìã</button>
                </div>
                <p>
                  Here HA is any weak acid (for example, CH‚ÇÉCOOH), A‚Åª is its conjugate base, and square brackets denote molar
                  concentrations (mol¬∑L‚Åª¬π). Ka measures acid strength: larger Ka means more H‚Å∫ and A‚Åª at equilibrium.
                </p>
                <p>
                  In a solution containing HA and a soluble salt of A‚Åª, the salt fully dissociates, making <strong>[A‚Åª]</strong>
                  large at the start. To keep Ka fixed, the equilibrium shifts left: <strong>less HA ionizes</strong> and [H‚Å∫]
                  is lower than in a solution of HA alone.
                </p>

                <div class="formula-row">
                  <span class="formula-label">Approximate [H‚Å∫]:</span>
                  <span class="formula-text">[H‚Å∫] ‚âà Ka √ó [HA] / [A‚Åª]</span>
                  <button class="copy-button" type="button" aria-label="Copy H-plus approximation">üìã</button>
                </div>
                <p>
                  When both HA and A‚Åª are present in significant amounts, this approximation comes from rearranging the Ka
                  expression and assuming that A‚Åª mainly comes from the salt, not from HA ionization.
                </p>

                <div class="formula-row">
                  <span class="formula-label">Weak base:</span>
                  <span class="formula-text">B(aq) + H‚ÇÇO(l) ‚áå BH‚Å∫(aq) + OH‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy weak base equilibrium">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Kb:</span>
                  <span class="formula-text">Kb = [BH‚Å∫][OH‚Åª] / [B]</span>
                  <button class="copy-button" type="button" aria-label="Copy Kb expression">üìã</button>
                </div>
                <p>
                  Adding the conjugate acid BH‚Å∫ (for example, from NH‚ÇÑCl) increases [BH‚Å∫] and shifts this equilibrium to the
                  left, lowering [OH‚Åª] and making the solution less basic.
                </p>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Examples, tips &amp; intuition</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Short example &amp; interpretation</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì HF in the presence of HCl</div>
                  <p class="example-body">
                    A solution is 0.20 M in HF (Ka ‚âà 6.8√ó10‚Åª‚Å¥) and 0.10 M in HCl. HCl is a strong acid, so [H‚Å∫] is about
                    0.10 M from HCl alone. The important equilibrium is HF ‚áå H‚Å∫ + F‚Åª. Let x be the extra [F‚Åª] from HF
                    ionization. Using Ka ‚âà (0.10√óx)/(0.20) = 6.8√ó10‚Åª‚Å¥, we find x ‚âà 1.4√ó10‚Åª¬≥ M. Thus [F‚Åª] ‚âà 1.4√ó10‚Åª¬≥ M, much
                    smaller than it would be without HCl: the common ion H‚Å∫ has suppressed HF ionization.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Interpretation:</strong> With a fixed Ka, increasing a product concentration (such as [A‚Åª] or [H‚Å∫])
                    forces the equilibrium to shift back toward the undissociated weak species, lowering [H‚Å∫] or [OH‚Åª] compared
                    to a solution without the common ion.
                  </li>
                  <li>
                    <strong>Common pitfall:</strong> Thinking that adding a common ion changes Ka or Kb. Equilibrium constants
                    are fixed at a given temperature; only concentrations change.
                  </li>
                  <li>
                    <strong>Check yourself:</strong> In common-ion problems, always list all major species and decide which
                    equilibrium actually controls [H‚Å∫] or [OH‚Åª].
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- 17.2 Buffers -->
        <article class="section-card" id="sec-17-2" data-section-keywords="buffer weak acid base henderson hasselbalch pH range capacity">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.2 Buffers</div>
              <div class="section-label">Controlling pH with weak acid‚Äìbase pairs</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">Henderson‚ÄìHasselbalch</div>
              <div class="section-badge">pH = pKa ¬± 1</div>
            </div>
          </header>
          <p class="section-summary">
            Buffers are made from a weak acid with its conjugate base or a weak base with its conjugate acid. They resist pH
            changes and are described quantitatively by the Henderson‚ÄìHasselbalch equation.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Core ideas &amp; definitions</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    A <strong>buffer solution</strong> contains either a weak acid HA with its conjugate base A‚Åª (from a salt
                    like NaA) or a weak base B with its conjugate acid BH‚Å∫. It resists pH changes when small amounts of strong
                    acid or base are added.
                  </li>
                  <li>
                    Buffers work because added H‚Å∫ is consumed mainly by the base component (A‚Åª or B) and added OH‚Åª is consumed
                    mainly by the acid component (HA or BH‚Å∫), keeping free [H‚Å∫] and [OH‚Åª] nearly constant.
                  </li>
                  <li>
                    A buffer is most effective when the concentrations of the conjugate pair are
                    <strong>similar in magnitude</strong> and reasonably large (so the buffer can neutralize a significant
                    amount of added acid or base).
                  </li>
                  <li>
                    A useful rule of thumb: a weak acid‚Äìbase pair acts as a good buffer in the range
                    <strong>pH ‚âà pKa ¬± 1</strong>.
                  </li>
                </ul>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">Henderson‚ÄìHasselbalch &amp; capacity</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; their meaning</div>

                <p><strong>1. Henderson‚ÄìHasselbalch equation</strong></p>
                <div class="formula-row">
                  <span class="formula-label">Buffer pH:</span>
                  <span class="formula-text">pH = pKa + log([A‚Åª]/[HA])</span>
                  <button class="copy-button" type="button" aria-label="Copy Henderson‚ÄìHasselbalch">üìã</button>
                </div>
                <p>
                  This comes from Ka = [H‚Å∫][A‚Åª]/[HA] by taking logs. pKa is ‚àílog(Ka), and [A‚Åª]/[HA] is the ratio of conjugate
                  base to acid (typically equilibrium concentrations, which in many buffer setups are close to the initial
                  values).
                </p>
                <p>
                  When [A‚Åª] = [HA], the log term is zero, so <strong>pH = pKa</strong>. When the ratio is between 0.1 and 10,
                  the pH lies in the buffer range pKa ¬± 1.
                </p>

                <p><strong>2. Buffer capacity (qualitative)</strong></p>
                <p>
                  <strong>Buffer capacity</strong> is the amount of strong acid or base a buffer can neutralize before its pH
                  changes appreciably. It increases when:
                </p>
                <ul class="node-list">
                  <li>The total concentration [HA] + [A‚Åª] is larger.</li>
                  <li>The ratio [A‚Åª]/[HA] is closer to 1, so the buffer can handle both added acid and base.</li>
                </ul>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Short examples &amp; tips</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Worked examples &amp; strategies</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì pH of an acetic acid/acetate buffer</div>
                  <p class="example-body">
                    A buffer contains 0.30 M CH‚ÇÉCOOH and 0.30 M CH‚ÇÉCOONa; pKa = 4.74. Using pH = pKa + log([A‚Åª]/[HA]) with
                    [A‚Åª] = [HA], we obtain pH = 4.74 + log(1.0) = 4.74. The pH equals pKa when acid and conjugate base
                    concentrations are equal.
                  </p>
                </div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Adding strong acid to a buffer</div>
                  <p class="example-body">
                    For 1.00 L of the buffer above, we have 0.30 mol CH‚ÇÉCOOH and 0.30 mol CH‚ÇÉCOO‚Åª. Adding 0.010 mol HCl
                    converts 0.010 mol CH‚ÇÉCOO‚Åª to CH‚ÇÉCOOH, giving 0.29 mol CH‚ÇÉCOO‚Åª and 0.31 mol CH‚ÇÉCOOH. The new pH is
                    4.74 + log(0.29/0.31) ‚âà 4.71, a small change despite adding a strong acid.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Strategy:</strong> For buffer problems with added strong acid or base, always do a stoichiometry
                    step first (use up acid or base) and then apply the Henderson‚ÄìHasselbalch equation.
                  </li>
                  <li>
                    <strong>Common pitfall:</strong> Plugging initial concentrations directly into Henderson‚ÄìHasselbalch after
                    adding strong acid or base without adjusting for reaction of HA/A‚Åª or B/BH‚Å∫.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- 17.3 Acid‚ÄìBase Titrations -->
        <article class="section-card" id="sec-17-3" data-section-keywords="titration equivalence point strong acid base weak henderson curve">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.3 Acid‚ÄìBase Titrations</div>
              <div class="section-label">Curves, equivalence points, and indicators</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">strong‚Äìstrong</div>
              <div class="section-badge">weak‚Äìstrong</div>
            </div>
          </header>
          <p class="section-summary">
            Titration curves show how pH changes as one solution is added to another. Comparing moles of acid and base, plus
            buffer or hydrolysis equilibria, lets us interpret strong‚Äìstrong and weak‚Äìstrong titrations.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Core ideas &amp; definitions</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    A <strong>titration</strong> is the gradual addition of a titrant of known concentration to an analyte to
                    determine concentration or study reaction behavior.
                  </li>
                  <li>
                    The <strong>equivalence point</strong> occurs when moles of titrant added equal the moles needed by
                    stoichiometry to completely consume the analyte.
                  </li>
                  <li>
                    The <strong>end point</strong> is the volume where the indicator changes color; a good indicator‚Äôs end point
                    is very close to the equivalence point.
                  </li>
                  <li>
                    A <strong>titration curve</strong> (pH vs titrant volume) depends on whether the acid and base are strong or
                    weak and on which is in the flask.
                  </li>
                  <li>
                    Strong acid‚Äìstrong base curves have a steep jump near pH 7 at equivalence; weak acid‚Äìstrong base curves
                    display a buffer region and an equivalence point with pH &gt; 7.
                  </li>
                </ul>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">Stoichiometry &amp; pH patterns</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; their meaning</div>

                <p><strong>1. Stoichiometry at equivalence</strong></p>
                <div class="formula-row">
                  <span class="formula-label">1:1 titration:</span>
                  <span class="formula-text">M_a V_a = M_b V_b</span>
                  <button class="copy-button" type="button" aria-label="Copy titration stoichiometry">üìã</button>
                </div>
                <p>
                  For a monoprotic acid and monobasic base, Ma and Mb are molarities (mol¬∑L‚Åª¬π), Va and Vb are volumes (L) at
                  equivalence. More generally, include stoichiometric coefficients if the reaction is not 1:1.
                </p>

                <p><strong>2. Strong acid‚Äìstrong base titrations</strong></p>
                <p>
                  Before equivalence, the pH is controlled by the excess strong acid or base (simple mole balance). At
                  equivalence, the solution contains only neutral salts and water, giving <strong>pH ‚âà 7</strong> at 25 ¬∞C.
                  After equivalence, the pH is controlled by the excess strong base (or acid) added.
                </p>

                <p><strong>3. Weak acid‚Äìstrong base titrations</strong></p>
                <p>
                  Before equivalence, the solution contains both HA and A‚Åª and behaves as a <strong>buffer</strong>; the pH is
                  given by the Henderson‚ÄìHasselbalch equation.
                </p>
                <div class="formula-row">
                  <span class="formula-label">Buffer region:</span>
                  <span class="formula-text">pH = pKa + log([A‚Åª]/[HA])</span>
                  <button class="copy-button" type="button" aria-label="Copy buffer pH in titration">üìã</button>
                </div>
                <p>
                  At the <strong>half-equivalence point</strong>, [A‚Åª] = [HA] and pH = pKa. At equivalence, only A‚Åª remains and
                  behaves as a weak base:
                </p>
                <div class="formula-row">
                  <span class="formula-label">Hydrolysis:</span>
                  <span class="formula-text">A‚Åª + H‚ÇÇO ‚áå HA + OH‚Åª</span>
                  <button class="copy-button" type="button" aria-label="Copy hydrolysis equilibrium">üìã</button>
                </div>
                <p>
                  Using Kb = Kw/Ka and the concentration of A‚Åª, we compute [OH‚Åª] and thus pH. For a weak acid titrated with a
                  strong base, <strong>pH &gt; 7 at equivalence</strong>.
                </p>

                <p><strong>4. Weak base‚Äìstrong acid titrations</strong></p>
                <p>
                  Analogous logic applies: the buffer region contains B and BH‚Å∫, and at half-equivalence <strong>pOH = pKb</strong>
                  (or pH = 14 ‚àí pKb). At equivalence, only BH‚Å∫ is present and acts as a weak acid, giving <strong>pH &lt; 7</strong>.
                </p>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Curves &amp; examples</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Short examples &amp; interpretations</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Strong acid‚Äìstrong base curve</div>
                  <p class="example-body">
                    Titrating 25.0 mL of 0.10 M HCl with 0.10 M NaOH: the pH starts near 1.0, climbs gradually, then shoots up
                    through a very steep region around pH 7 at equivalence (25.0 mL NaOH added), and finally levels off near
                    pH 13 as excess base is added. Any indicator whose transition range spans pH 7 (such as bromothymol blue) is
                    suitable.
                  </p>
                </div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Half-equivalence for a weak acid</div>
                  <p class="example-body">
                    In titrating 0.10 M CH‚ÇÉCOOH with 0.10 M NaOH, the half-equivalence point occurs when half the original acid
                    has been neutralized. The solution then contains equal moles of CH‚ÇÉCOOH and CH‚ÇÉCOO‚Åª, so pH = pKa ‚âà 4.74. This
                    provides a direct way to estimate pKa from the titration curve.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Indicator choice:</strong> Match the indicator‚Äôs pH transition range to the steep part of the
                    titration curve near equivalence (around pH 7 for strong‚Äìstrong, above 7 for weak acid‚Äìstrong base, below 7
                    for weak base‚Äìstrong acid).
                  </li>
                  <li>
                    <strong>Strategy:</strong> For any point on a titration curve, first decide if stoichiometry (strong
                    acid/base excess) or equilibrium (buffer or hydrolysis) controls the pH.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- 17.4 Solubility Equilibria -->
        <article class="section-card" id="sec-17-4" data-section-keywords="solubility equilibrium ksp molar solubility common ion">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.4 Solubility Equilibria</div>
              <div class="section-label">Sparingly soluble salts and Ksp</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">molar solubility</div>
              <div class="section-badge">common-ion effect</div>
            </div>
          </header>
          <p class="section-summary">
            Slightly soluble ionic compounds establish equilibria between solid and dissolved ions. Their solubility-product
            constants link molar solubility to equilibrium concentrations and show how common ions reduce solubility.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Core ideas</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    Many ionic compounds are <strong>sparingly soluble</strong>; they dissolve only slightly but still obey
                    equilibrium rules.
                  </li>
                  <li>
                    At saturation, a dynamic equilibrium exists between undissolved solid and dissolved ions; the equilibrium
                    constant is the <strong>solubility-product constant, Ksp</strong>.
                  </li>
                  <li>
                    <strong>Molar solubility (s)</strong> is the number of moles of solute that dissolve per liter of solution
                    to reach saturation.
                  </li>
                  <li>
                    Ksp and solubility are related but not identical: solubility depends on Ksp, stoichiometry of dissolution,
                    and any common ions present.
                  </li>
                  <li>
                    A common ion from another soluble salt lowers the solubility of a sparingly soluble salt by shifting the
                    dissolution equilibrium toward the undissolved solid.
                  </li>
                </ul>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">Ksp expressions &amp; solubility</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; their meaning</div>

                <p><strong>1. General Ksp expression</strong></p>
                <div class="formula-row">
                  <span class="formula-label">Dissolution:</span>
                  <span class="formula-text">M‚ÇìA·µß(s) ‚áå x M‚Åø‚Å∫(aq) + y A·µê‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy general dissolution">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Ksp:</span>
                  <span class="formula-text">Ksp = [M‚Åø‚Å∫]À£ [A·µê‚Åª] ∏</span>
                  <button class="copy-button" type="button" aria-label="Copy Ksp expression">üìã</button>
                </div>
                <p>
                  The exponents come from stoichiometric coefficients; the solid does not appear in Ksp. At a fixed
                  temperature, Ksp is constant.
                </p>

                <p><strong>2. Molar solubility in pure water</strong></p>
                <div class="formula-row">
                  <span class="formula-label">MX:</span>
                  <span class="formula-text">Ksp = s¬≤ ‚áí s = ‚àöKsp</span>
                  <button class="copy-button" type="button" aria-label="Copy MX solubility">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">MX‚ÇÇ:</span>
                  <span class="formula-text">Ksp = 4s¬≥ ‚áí s = (Ksp/4)^(1/3)</span>
                  <button class="copy-button" type="button" aria-label="Copy MX2 solubility">üìã</button>
                </div>
                <p>
                  Here s is the molar solubility (mol¬∑L‚Åª¬π). Different stoichiometries (MX‚ÇÉ, M‚ÇÇX‚ÇÉ, etc.) lead to different
                  polynomial relations between Ksp and s.
                </p>

                <p><strong>3. Solubility with a common ion</strong></p>
                <p>
                  For MX(s) ‚áå M‚Å∫ + X‚Åª in a solution where X‚Åª is present from a soluble salt at concentration [X‚Åª]‚ÇÄ:
                </p>
                <div class="formula-row">
                  <span class="formula-label">Approximate [M‚Å∫]:</span>
                  <span class="formula-text">[M‚Å∫] ‚âà Ksp / [X‚Åª]‚ÇÄ</span>
                  <button class="copy-button" type="button" aria-label="Copy common ion solubility">üìã</button>
                </div>
                <p>
                  As [X‚Åª]‚ÇÄ increases, the solubility of MX decreases. This is the common-ion effect applied to solubility.
                </p>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Examples &amp; intuition</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Short examples</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì AgCl in pure water</div>
                  <p class="example-body">
                    For AgCl(s) ‚áå Ag‚Å∫ + Cl‚Åª with Ksp = 1.8√ó10‚Åª¬π‚Å∞, let s be the molar solubility. Then [Ag‚Å∫] = [Cl‚Åª] = s and
                    Ksp = s¬≤. Solving s = ‚àö(1.8√ó10‚Åª¬π‚Å∞) ‚âà 1.3√ó10‚Åª‚Åµ M shows that only a very small amount of AgCl dissolves in
                    pure water.
                  </p>
                </div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì AgCl in 0.10 M NaCl</div>
                  <p class="example-body">
                    In 0.10 M NaCl, we can approximate [Cl‚Åª] ‚âà 0.10 M. Using Ksp = [Ag‚Å∫][Cl‚Åª], we get [Ag‚Å∫] ‚âà Ksp/[Cl‚Åª] =
                    1.8√ó10‚Åª¬π‚Å∞ / 0.10 = 1.8√ó10‚Åª‚Åπ M. The solubility drops by about 10¬≥‚Äì10‚Å¥ compared to pure water, illustrating
                    how a common ion strongly suppresses solubility.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Strategy:</strong> Start by writing the dissolution equation, express ion concentrations in terms of
                    the molar solubility s, and then use Ksp to solve for s.
                  </li>
                  <li>
                    <strong>Common pitfall:</strong> Forgetting to include common ions already present in solution when
                    computing Ksp or Qsp.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- 17.5 Factors That Affect Solubility -->
        <article class="section-card" id="sec-17-5" data-section-keywords="pH effect solubility basic anion complex ion formation kf">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.5 Factors That Affect Solubility</div>
              <div class="section-label">pH effects and complex ion formation</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">acidic dissolution</div>
              <div class="section-badge">complex ions (Kf)</div>
            </div>
          </header>
          <p class="section-summary">
            Solubility changes with pH and with formation of complex ions. Basic anions dissolve more in acidic solution, and
            metal ions often become more soluble when they form stable complexes with ligands like NH‚ÇÉ.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Conceptual foundations</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    Solubility constants (Ksp) describe salt‚Äìion equilibria, but real solubility also depends on other coupled
                    equilibria such as acid‚Äìbase reactions and complex-ion formation.
                  </li>
                  <li>
                    Salts with <strong>basic anions</strong> (like CO‚ÇÉ¬≤‚Åª or S¬≤‚Åª) become more soluble in acidic solutions
                    because H‚Å∫ reacts with the anion and removes it from solution.
                  </li>
                  <li>
                    Many metal ions form <strong>complex ions</strong> with ligands such as NH‚ÇÉ, OH‚Åª, or CN‚Åª. Complex
                    formation can greatly increase the effective solubility of a sparingly soluble salt by keeping free metal
                    ion concentrations low.
                  </li>
                  <li>
                    Overall solubility often involves multiplying equilibrium constants (for Ksp and Kf) to describe the net
                    process.
                  </li>
                </ul>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">pH &amp; complex-ion equations</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; their meaning</div>

                <p><strong>1. pH effect for salts with basic anions</strong></p>
                <p>
                  For a carbonate salt like CaCO‚ÇÉ:
                </p>
                <div class="formula-row">
                  <span class="formula-label">Ksp step:</span>
                  <span class="formula-text">CaCO‚ÇÉ(s) ‚áå Ca¬≤‚Å∫(aq) + CO‚ÇÉ¬≤‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy CaCO3 dissolution">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Acid step:</span>
                  <span class="formula-text">CO‚ÇÉ¬≤‚Åª(aq) + 2H‚Å∫(aq) ‚áå H‚ÇÇCO‚ÇÉ(aq) ‚áå CO‚ÇÇ(g) + H‚ÇÇO(l)</span>
                  <button class="copy-button" type="button" aria-label="Copy carbonate acid reaction">üìã</button>
                </div>
                <p>
                  H‚Å∫ converts CO‚ÇÉ¬≤‚Åª into H‚ÇÇCO‚ÇÉ and then CO‚ÇÇ, removing CO‚ÇÉ¬≤‚Åª from solution. To re-establish Ksp, more CaCO‚ÇÉ
                  dissolves, so <strong>lowering pH increases solubility</strong> for salts with basic anions.
                </p>

                <p><strong>2. Complex ion formation</strong></p>
                <div class="formula-row">
                  <span class="formula-label">Complex:</span>
                  <span class="formula-text">Ag‚Å∫(aq) + 2NH‚ÇÉ(aq) ‚áå Ag(NH‚ÇÉ)‚ÇÇ‚Å∫(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy silver complex formation">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Kf:</span>
                  <span class="formula-text">Kf = [Ag(NH‚ÇÉ)‚ÇÇ‚Å∫] / ([Ag‚Å∫][NH‚ÇÉ]¬≤)</span>
                  <button class="copy-button" type="button" aria-label="Copy Kf expression">üìã</button>
                </div>
                <p>
                  A large Kf means the complex ion is very stable: once Ag‚Å∫ and NH‚ÇÉ meet, they strongly favor forming
                  Ag(NH‚ÇÉ)‚ÇÇ‚Å∫. This pulls Ag‚Å∫ out of solution, encouraging more of a silver salt (like AgCl) to dissolve.
                </p>

                <p><strong>3. Overall equilibrium with complex formation</strong></p>
                <p>
                  For AgCl(s) in NH‚ÇÉ solution, we combine:
                </p>
                <div class="formula-row">
                  <span class="formula-label">Ksp step:</span>
                  <span class="formula-text">AgCl(s) ‚áå Ag‚Å∫(aq) + Cl‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy AgCl dissolution">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Overall:</span>
                  <span class="formula-text">AgCl(s) + 2NH‚ÇÉ(aq) ‚áå Ag(NH‚ÇÉ)‚ÇÇ‚Å∫(aq) + Cl‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy overall AgCl + NH3">üìã</button>
                </div>
                <p>
                  The overall equilibrium constant is <strong>K = Ksp √ó Kf</strong>. Because Kf is large, K is large and the
                  salt becomes much more soluble in NH‚ÇÉ than in water alone.
                </p>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Examples &amp; intuition</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Short examples &amp; tips</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Acidic dissolution of CaCO‚ÇÉ</div>
                  <p class="example-body">
                    Limestone (mostly CaCO‚ÇÉ) dissolves very slowly in pure water but much faster in acidic rainwater. H‚Å∫ from
                    the acid converts CO‚ÇÉ¬≤‚Åª into H‚ÇÇCO‚ÇÉ and eventually CO‚ÇÇ(g), removing CO‚ÇÉ¬≤‚Åª from solution. To re-establish
                    equilibrium, more CaCO‚ÇÉ dissolves, so rock surfaces gradually wear away and caves can form.
                  </p>
                </div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Solubility of AgCl in NH‚ÇÉ</div>
                  <p class="example-body">
                    AgCl is nearly insoluble in water but dissolves in aqueous NH‚ÇÉ. A small amount of AgCl first dissolves to
                    give Ag‚Å∫ and Cl‚Åª; the Ag‚Å∫ is then converted into Ag(NH‚ÇÉ)‚ÇÇ‚Å∫ by complex formation. Maintaining Ksp requires
                    more AgCl to dissolve, so the net effect is a much higher solubility in NH‚ÇÉ than in pure water.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Strategy:</strong> For pH-dependent solubility, write both the Ksp equilibrium and the relevant
                    acid‚Äìbase equilibrium and see which species is being removed from solution.
                  </li>
                  <li>
                    <strong>Check yourself:</strong> If adding acid removes a basic anion or complex formation removes a metal
                    ion, solubility tends to increase.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- 17.6 Precipitation and Separation of Ions -->
        <article class="section-card" id="sec-17-6" data-section-keywords="precipitation separation ions qsp ksp selective qualitative analysis">
          <header class="section-header">
            <div class="section-title-group">
              <div class="section-title">17.6 Precipitation and Separation of Ions</div>
              <div class="section-label">Using Qsp and Ksp to decide what precipitates</div>
            </div>
            <div class="section-badges">
              <div class="section-badge">Qsp vs Ksp</div>
              <div class="section-badge">selective precipitation</div>
            </div>
          </header>
          <p class="section-summary">
            Comparing the ion product Qsp to Ksp tells us whether a precipitate forms. Different Ksp values allow selective
            precipitation, which underlies classical separation of metal ions.
          </p>

          <div class="nodes">
            <!-- Roots -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Roots</span>
                  <span class="node-tagline">Concepts</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Key ideas</div>
                <ul class="node-list">
                  <li>
                    A solution is <strong>unsaturated</strong> if more solid can dissolve, <strong>saturated</strong> if at
                    equilibrium, and <strong>supersaturated</strong> if it contains more dissolved solute than allowed at
                    equilibrium.
                  </li>
                  <li>
                    The <strong>ion product Qsp</strong> has the same algebraic form as Ksp but uses current (possibly
                    non-equilibrium) concentrations.
                  </li>
                  <li>
                    Comparing Qsp and Ksp predicts precipitation:
                    <ul class="node-list">
                      <li>Qsp &lt; Ksp ‚Üí unsaturated; no precipitate forms.</li>
                      <li>Qsp = Ksp ‚Üí saturated; at equilibrium.</li>
                      <li>Qsp &gt; Ksp ‚Üí supersaturated; precipitation occurs until Qsp = Ksp.</li>
                    </ul>
                  </li>
                  <li>
                    <strong>Selective precipitation</strong> uses differences in Ksp to precipitate one ion at a time by
                    carefully adjusting the concentration of a counter-ion.
                  </li>
                  <li>
                    Such precipitation schemes form the basis of classical <strong>qualitative analysis</strong> for metal
                    ions.
                  </li>
                </ul>
              </div>
            </div>

            <!-- Trunk -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Trunk</span>
                  <span class="node-tagline">Qsp, thresholds &amp; separation</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Important formulas &amp; their meaning</div>

                <p><strong>1. Reaction quotient for solubility</strong></p>
                <div class="formula-row">
                  <span class="formula-label">General:</span>
                  <span class="formula-text">M‚ÇìA·µß(s) ‚áå x M‚Åø‚Å∫(aq) + y A·µê‚Åª(aq)</span>
                  <button class="copy-button" type="button" aria-label="Copy general solubility">üìã</button>
                </div>
                <div class="formula-row">
                  <span class="formula-label">Qsp:</span>
                  <span class="formula-text">Qsp = [M‚Åø‚Å∫]À£ [A·µê‚Åª] ∏</span>
                  <button class="copy-button" type="button" aria-label="Copy Qsp expression">üìã</button>
                </div>
                <p>
                  Qsp &gt; Ksp means the solution has too many ions in solution and responds by forming solid until Qsp drops
                  to Ksp; Qsp &lt; Ksp means more solid can dissolve.
                </p>

                <p><strong>2. Onset of precipitation</strong></p>
                <p>
                  For AgCl(s) ‚áå Ag‚Å∫ + Cl‚Åª, with Ksp = [Ag‚Å∫][Cl‚Åª], the maximum [Ag‚Å∫] allowed at a given [Cl‚Åª] before
                  precipitation begins is:
                </p>
                <div class="formula-row">
                  <span class="formula-label">Threshold:</span>
                  <span class="formula-text">[Ag‚Å∫]‚Çò‚Çê‚Çì = Ksp / [Cl‚Åª]</span>
                  <button class="copy-button" type="button" aria-label="Copy threshold concentration">üìã</button>
                </div>
                <p>
                  Above this [Ag‚Å∫], Qsp &gt; Ksp and AgCl must precipitate until the product [Ag‚Å∫][Cl‚Åª] drops back to Ksp.
                </p>

                <p><strong>3. Selective precipitation</strong></p>
                <p>
                  In a mixture of ions (for example, Ag‚Å∫ and another metal ion), treated with a counter-ion such as Cl‚Åª, the
                  salt with the <strong>smaller Ksp</strong> generally precipitates first because its threshold concentration is
                  reached at a lower counter-ion concentration.
                </p>
              </div>
            </div>

            <!-- Leaves -->
            <div class="node">
              <button class="node-header" type="button">
                <span>
                  <span class="node-type">Leaves</span>
                  <span class="node-tagline">Examples &amp; separation logic</span>
                </span>
              </button>
              <div class="node-content">
                <div class="node-section-title">Short examples</div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Will AgCl precipitate?</div>
                  <p class="example-body">
                    Mixing equal volumes of 1.0√ó10‚Åª¬≥ M AgNO‚ÇÉ and 1.0√ó10‚Åª¬≥ M NaCl gives [Ag‚Å∫] = [Cl‚Åª] = 5.0√ó10‚Åª‚Å¥ M. Then
                    Qsp = (5.0√ó10‚Åª‚Å¥)¬≤ = 2.5√ó10‚Åª‚Å∑. Since Ksp(AgCl) = 1.8√ó10‚Åª¬π‚Å∞, Qsp &gt;&gt; Ksp and AgCl must precipitate until the
                    product [Ag‚Å∫][Cl‚Åª] drops back to 1.8√ó10‚Åª¬π‚Å∞.
                  </p>
                </div>

                <div class="example-block">
                  <div class="example-title">Example ‚Äì Qualitative separation idea</div>
                  <p class="example-body">
                    In a solution containing Ag‚Å∫ and a second metal ion that forms a more soluble chloride, AgCl can be
                    precipitated first by carefully adding Cl‚Åª until the AgCl threshold is exceeded but the other metal‚Äôs
                    chloride is still below its threshold. Filtering off the AgCl leaves the second metal ion in solution for
                    further analysis.
                  </p>
                </div>

                <ul class="node-list">
                  <li>
                    <strong>Strategy:</strong> For precipitation questions, always compute Qsp and compare it to Ksp rather
                    than guessing based on ‚Äúlarge‚Äù or ‚Äúsmall‚Äù concentrations.
                  </li>
                  <li>
                    <strong>Common pitfall:</strong> Forgetting dilution when solutions are mixed. Adjust concentrations after
                    mixing before computing Qsp.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

      </section>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied to clipboard</div>

  <script>
    (() => {
      const searchBox = document.getElementById('search-box');
      const cards = Array.from(document.querySelectorAll('.section-card'));
      const navLinks = Array.from(document.querySelectorAll('.nav-link'));
      const toast = document.getElementById('toast');
      let toastTimeoutId = null;

      const showToast = (message) => {
        if (!toast) return;
        toast.textContent = message || 'Copied to clipboard';
        toast.classList.add('visible');
        if (toastTimeoutId) window.clearTimeout(toastTimeoutId);
        toastTimeoutId = window.setTimeout(() => {
          toast.classList.remove('visible');
        }, 1500);
      };

      const copyText = async (text) => {
        if (!text) return;
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(text);
          } else {
            const ta = document.createElement('textarea');
            ta.value = text;
            ta.style.position = 'fixed';
            ta.style.top = '-9999px';
            document.body.appendChild(ta);
            ta.focus();
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
          }
          showToast('Copied to clipboard');
        } catch (err) {
          showToast('Copy failed');
        }
      };

      // Double-click to copy any non-trivial text
      document.addEventListener('dblclick', (event) => {
        const target = event.target;
        if (!target) return;
        let text = target.innerText || target.textContent || '';
        if (text && text.trim().length >= 3) {
          copyText(text.trim());
        }
      });

      // Copy buttons for formulas
      document.querySelectorAll('.copy-button').forEach((btn) => {
        btn.addEventListener('click', () => {
          const formula = btn.previousElementSibling;
          if (!formula) return;
          const text = (formula.innerText || formula.textContent || '').trim();
          if (text) {
            copyText(text);
          }
        });
      });

      // Collapsible nodes
      document.querySelectorAll('.node').forEach((node) => {
        const header = node.querySelector('.node-header');
        if (!header) return;
        header.addEventListener('click', () => {
          node.classList.toggle('collapsed');
        });
      });

      // Search/filter
      const applyFilter = () => {
        const term = (searchBox.value || '').toLowerCase().trim();
        cards.forEach((card) => {
          if (!term) {
            card.style.display = '';
            return;
          }
          const text = (card.innerText || card.textContent || '').toLowerCase();
          card.style.display = text.includes(term) ? '' : 'none';
        });
      };

      if (searchBox) {
        searchBox.addEventListener('input', applyFilter);
      }

      // Scroll-linked nav highlighting
      const setActiveNavLink = (id) => {
        navLinks.forEach((link) => {
          const href = link.getAttribute('href') || '';
          if (href === '#' + id) {
            link.classList.add('active-link');
          } else {
            link.classList.remove('active-link');
          }
        });
      };

      navLinks.forEach((link) => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
          const href = link.getAttribute('href');
          if (!href || !href.startsWith('#')) return;
          const targetId = href.slice(1);
          const targetEl = document.getElementById(targetId);
          if (!targetEl) return;
          targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
          setActiveNavLink(targetId);
        });
      });

      const observer = new IntersectionObserver((entries) => {
        let best = null;
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            if (!best || entry.intersectionRatio > best.intersectionRatio) {
              best = entry;
            }
          }
        });
        if (best && best.target && best.target.id) {
          setActiveNavLink(best.target.id);
        }
      }, {
        root: null,
        rootMargin: '0px 0px -70% 0px',
        threshold: [0.2, 0.35, 0.5]
      });

      cards.forEach((card) => observer.observe(card));
    })();
  </script>
</body>
</html>

